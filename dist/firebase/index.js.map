{"version":3,"sources":["../../server/firebase/index.js"],"names":["admin","initializeFirebaseConnection","process","env","CLIENT_EMAIL","PRIVATE_KEY","PROJECT_ID","initializeApp","credential","cert","projectId","clientEmail","privateKey","databaseURL","storageBucket","serviceAccount","getDbInstance","db","firestore","settings","timestampsInSnapshots","getBucketInstance","storage","bucket","module","exports"],"mappings":";;AAAA;;IAAYA,K;;AACZ;;;;;;;;AAGA,IAAMC,+BAA+B,SAA/BA,4BAA+B,GAAM;AAAA,qBACSC,QAAQC,GADjB;AAAA,MACjCC,YADiC,gBACjCA,YADiC;AAAA,MACnBC,WADmB,gBACnBA,WADmB;AAAA,MACNC,UADM,gBACNA,UADM;;;AAGzC,MAAIF,gBAAgBC,WAAhB,IAA+BC,UAAnC,EAA+C;AAC7CN,UAAMO,aAAN,CAAoB;AAClBC,kBAAYR,MAAMQ,UAAN,CAAiBC,IAAjB,CAAsB;AAChCC,mBAAWJ,UADqB;AAEhCK,qBAAaP,YAFmB;AAGhCQ,oBAAYP;AAHoB,OAAtB,CADM;AAMlBQ,mBAAa,0CANK;AAOlBC,qBAAe;AAPG,KAApB;AASD,GAVD,MAUO;AACLd,UAAMO,aAAN,CAAoB;AAClBC,kBAAYR,MAAMQ,UAAN,CAAiBC,IAAjB,CAAsBM,0BAAtB,CADM;AAElBF,mBAAa,0CAFK;AAGlBC,qBAAe;AAHG,KAApB;AAKD;AACF,CApBD;;AAsBAb;;AAGA,IAAMe,gBAAgB,SAAhBA,aAAgB,GAAM;AAC1B,MAAMC,KAAKjB,MAAMkB,SAAN,EAAX;AACAD,KAAGE,QAAH,CAAY,EAAEC,uBAAuB,IAAzB,EAAZ;;AAEA,SAAOH,EAAP;AACD,CALD;;AAQA,IAAMI,oBAAoB,SAApBA,iBAAoB;AAAA,SAAMrB,MAAMsB,OAAN,GAAgBC,MAAhB,EAAN;AAAA,CAA1B;;AAEAC,OAAOC,OAAP,GAAiB,EAAER,IAAID,eAAN,EAAuBO,QAAQF,mBAA/B,EAAjB","file":"index.js","sourcesContent":["import * as admin from 'firebase-admin';\nimport serviceAccount from '../firebase-admin-sdk';\n\n\nconst initializeFirebaseConnection = () => {\n  const { CLIENT_EMAIL, PRIVATE_KEY, PROJECT_ID } = process.env;\n\n  if (CLIENT_EMAIL && PRIVATE_KEY && PROJECT_ID) {\n    admin.initializeApp({\n      credential: admin.credential.cert({\n        projectId: PROJECT_ID,\n        clientEmail: CLIENT_EMAIL,\n        privateKey: PRIVATE_KEY,\n      }),\n      databaseURL: 'https://travelguide-bf6df.firebaseio.com',\n      storageBucket: 'travelguide-bf6df.appspot.com',\n    });\n  } else {\n    admin.initializeApp({\n      credential: admin.credential.cert(serviceAccount),\n      databaseURL: 'https://travelguide-bf6df.firebaseio.com',\n      storageBucket: 'travelguide-bf6df.appspot.com',\n    });\n  }\n};\n\ninitializeFirebaseConnection();\n\n\nconst getDbInstance = () => {\n  const db = admin.firestore();\n  db.settings({ timestampsInSnapshots: true });\n\n  return db;\n};\n\n\nconst getBucketInstance = () => admin.storage().bucket();\n\nmodule.exports = { db: getDbInstance(), bucket: getBucketInstance() };\n"]}